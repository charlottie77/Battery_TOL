<!DOCTYPE html>
<html>
  <link rel="stylesheet" type="text/css" href="css/main.css"></link>
  <body>
    <div id="page1">
      <div class="p1-1">
        <div class="text1">Letâ€™s learn about</div>
      </div>
      <div class="p1-2">
        <div class="text2">Phone Battery</div>
      </div>
      <div class="p1-3">
        <button class="button1" onclick="myFunction1()">START</button>
      </div>
    </div>
    <div id="page2">
      <div class="text4">What do you think the battery is made of?</div>
      <div class="rectangle1"><div class="img5" id="img5"><img src="assets/Metal.png"></div></div><div class="text11">Battery</div>
      <div class="text5">Please select:</div>
      <input class="radio1" onclick="radio1()" type="radio" id="current" name="material" value="Current">
      <div class="img1"><img src='assets/Current.png'></div>
      <div class="text7">Current</div>
      <input class="radio2" onclick="radio2()" type="radio" id="metal" name="material" value="Metal">
      <div class="img2"><img src="assets/Metal.png"></div>
      <div class="text8">Metal</div>
      <input class="radio3" onclick="radio3()" type="radio" id="chemical_solution" name="material" value="Chemical Solution">
      <div class="img3"><img src="assets/Chemical Solution.png"></div>
      <div class="text9">Chemical Solution</div>
      <input class="radio4" onclick="radio4()" type="radio" id="cotton" name="material" value="Cotton">
      <div class="img4"><img src="assets/Cotton.png"></div>
      <div class="text10">Cotton</div>
      <button class="button2" id="button2" onclick="myFunction2()"><div class="text6" id="text6">Done</div></button>
    </div>
    <div id="page3">
      <div class="text4">Correct!</div>
      <div class="rectangle1"><div class="img6"><img src="assets/Chemical Solution.png"></div></div><div class="text11">Battery</div>
      <button class="button3" onclick="myFunction3()"><div class="text12">Next</div></button>
    </div>
    <div id="page31">
      <div class="text4">Incorrect</div>
      <div class="rectangle1"><div class="img6"><img src="assets/Chemical Solution.png"></div></div><div class="text11">Battery</div>
      <button class="button3" onclick="myFunction3()"><div class="text12">Next</div></button>
    </div>
    <div id="page4">
      <div class="youtubeposition"><div id="player"></div></div>
      <button class="button4" id="button4" onclick="myFunction4()"><div class="text12">Next</div></button>
    </div>
    <div id="page5">
      <div class="text4">What is moving in the Li-ion battery & wire?</div>
      <div class="text5">Please drag the items into the two blank slots in the left:</div>
      <div class="diagram"><img src="assets/dragdrop.png"></div>
      <div id="div1" class="dropzone" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
      <div id="div2" class="dropzone" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
      <div class="img7"><img src="assets/curr.png" draggable="true" ondragstart="drag(event)" id="drag1"></div>
      <div class="img8"><img src="assets/elec.png" draggable = "true" ondragstart="drag(event)" id="drag2"></div>
      <button class="button2" id="button5" onclick="myFunction5()"><div class="text6" id="text12">Done</div></button>
    </div>
    <script>
      var flag = 1;
      function myFunction1() {
        document.getElementById("page1").style.display = "none";
        document.getElementById("page2").style.display = "block";
        document.getElementById("button2").disabled = true;
      }
      function myFunction2() {
        document.getElementById("page2").style.display = "none";
        var radios = document.getElementsByName('material');
        if (radios[0].checked) {
          document.getElementById("page3").style.display = "block";
        }
        else {
          //we can later make it personalized for each response
          document.getElementById("page31").style.display = "block";
        }
      }
      function myFunction3() {
        document.getElementById("page3").style.display = "none";
        document.getElementById("page31").style.display = "none";
        document.getElementById("page4").style.display = "block";
        flag=0;
      }
      function myFunction4() {
        document.getElementById("page4").style.display = "none";
        document.getElementById("page5").style.display = "block";
        document.getElementById("button5").disabled = true;
        document.getElementById("button4").style.display = "none";
      }
      function myFunction5() {
        document.getElementById("page5").style.display = "none";
        document.getElementById("page4").style.display = "block";
        flag=0;
      }


      function radio1() {
        document.getElementById("img5").style.display = "block";
        document.getElementById("img5").innerHTML = "<img src='assets/Current.png'>";
        document.getElementById('button2').style.backgroundColor = "#FFC107";
        document.getElementById('text6').style.color = "#FFFFFF";
        document.getElementById("button2").disabled = false;
      }
      function radio2() {
        document.getElementById("img5").style.display = "block";
        document.getElementById("img5").innerHTML = "<img src='assets/Metal.png'>";
        document.getElementById('button2').style.backgroundColor = "#FFC107";
        document.getElementById('text6').style.color = "#FFFFFF";
        document.getElementById("button2").disabled = false;
      }
      function radio3() {
        document.getElementById("img5").style.display = "block";
        document.getElementById("img5").innerHTML = "<img src='assets/Chemical Solution.png'>";
        document.getElementById('button2').style.backgroundColor = "#FFC107";
        document.getElementById('text6').style.color = "#FFFFFF";
        document.getElementById("button2").disabled = false;
      }
      function radio4() {
        document.getElementById("img5").style.display = "block";
        document.getElementById("img5").innerHTML = "<img src='assets/Cotton.png'>";
        document.getElementById('button2').style.backgroundColor = "#FFC107";
        document.getElementById('text6').style.color = "#FFFFFF";
        document.getElementById("button2").disabled = false;
      }

      function allowDrop(ev) {
        ev.preventDefault();
      }

      function drag(ev) {
        ev.dataTransfer.setData("text", ev.target.id);
      }

      function drop(ev) {
        console.log(ev.target.childNodes);
        console.log(ev.target.childNodes.length);
        ev.preventDefault();
        var data = ev.dataTransfer.getData("text");
        var el = ev.target;
        if (ev.target.childNodes.length>=1) {
          ev.target.childNodes[0].remove();
          el.appendChild(document.getElementById(data).cloneNode(true));
          console.log("remove");
          //ev.target.removeChild(ev.target.childNodes[0]);
        }
        else {
          el.appendChild(document.getElementById(data).cloneNode(true));
        }
        //ev.target.appendChild(document.getElementById(data));
        if (document.getElementById('div1').innerHTML != "" && document.getElementById('div2').innerHTML != "") {
          document.getElementById("button5").disabled = false;
          document.getElementById('button5').style.backgroundColor = "#FFC107";
          document.getElementById('text12').style.color = "#FFFFFF";
        }

      }

      // 1. Youtube video starts here
      // 2. This code loads the IFrame Player API code asynchronously.
      var videoIDs = [
        'lil-Xqhugx8',
        'uFLvcRcBy30'
    ];
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3. This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      var player, currentVideoId = 0;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
      }

      // 4. The API will call this function when the video player is ready.
      function onPlayerReady(event) {
        //event.target.loadVideoById(videoIDs[currentVideoId]);
      }

      // 5. The API calls this function when the player's state changes.
      //    The function indicates that when playing a video (state=1),
      //    the player should play for six seconds and then stop.
      //var done = false;
      function onPlayerStateChange(event) {
        //if (event.data == YT.PlayerState.PLAYING && !done) {
          //setTimeout(pauseVideo, 6000);
          //done = true;
        //}
        if(event.data === 0) {
          if (currentVideoId==1) {
            document.getElementById("button4").style.display = "block";
          }
          if (currentVideoId==2) {
            document.getElementById("button4").style.display = "block";
          }
          if (event.data == YT.PlayerState.ENDED ) {
            // currentVideoId++;
            // if (currentVideoId < videoIDs.length) {
            //     player.loadVideoById(videoIDs[currentVideoId]);
            // }
          }
        }
      }
      setInterval(function() {
          if(flag==0) {
              // Button is hidden
              if (currentVideoId < videoIDs.length) {
                player.loadVideoById(videoIDs[currentVideoId]);
              }
              currentVideoId++;
              flag=1;
          }
      }, 1000);
    </script>
 </body>
</html>
