<!DOCTYPE html>
<html>
  <link rel="stylesheet" type="text/css" href="css/main.css"></link>
  <body>
    <div id="page1">
      <div class="p1-1">
        <div class="text1">Let’s learn about</div>
      </div>
      <div class="p1-2">
        <div class="text2">Phone Battery</div>
      </div>
      <div class="p1-3">
        <button class="button1" onclick="myFunction1()">START</button>
      </div>
    </div>

    <div id="page2" class="show-p2">
      <div class="p2-1">
        <div class="text4">What do you think the battery is made of?</div>
      </div>
      <div class="p2-2">
        <div class="p22-1">
          <div class="rectangle1">
            <div class="rec1-1">
              <img class="img5"  id="img5"  src="assets/Metal.png">
              <div class="text11">Battery</div>
            </div>
          </div>
        </div>
        <div class="p22-2">
          <div class="text5">Please select:</div>
          <div class="p22-i">
            <input class="radio1" onclick="radio1()" type="radio" id="current" name="material" value="Current">
            <img class="small-icon img1" src='assets/Current.png'>
            <div class="text-p2">Current</div>
          </div>
          <div class="p22-i">
            <input class="radio2" onclick="radio2()" type="radio" id="metal" name="material" value="Metal">
            <img class="small-icon img2" src="assets/Metal.png">
            <div class="text-p2">Metal</div>
          </div>
          <div class="p22-i">
            <input class="radio3" onclick="radio3()" type="radio" id="chemical_solution" name="material" value="Chemical Solution">
            <img class="small-icon img3" src="assets/Chemical Solution.png">
            <div class="text-p2">Chemical Solution</div>
          </div>
          <div class="p22-i">
            <input class="radio4" onclick="radio4()" type="radio" id="cotton" name="material" value="Cotton">
            <img class="small-icon img4" src="assets/Cotton.png">
            <div class="text-p2">Cotton</div>
          </div>
        </div>
      </div>
      <button class="button2 action-button" id="button2" onclick="myFunction2()">Done</button>
    </div>

    <div id="page3">
      <div class="text4">Correct!</div>
      <div class="p3-1">
        <div class="rectangle1">
          <div class="rec1-1">
            <img id="img6"  src="assets/Chemical Solution.png">
            <div class="text11">Battery</div>
          </div>
        </div>
        <div class="pp31-1">
          <label class="p3a-t-1" >Yes! Battery is made by</label>
          <label class="p3a-t-2">Chemical Solution</label>
        </div>
      </div>
      <button class="button3" onclick="myFunction3()"><div class="text12">Next</div></button>
    </div>
    <div id="page31">
      <div class="text4">Incorrect</div>
      <div class="p31-1">
        <div class="rectangle1">
          <div class="rec1-1">
            <img id="img6"  src="assets/Chemical Solution.png">
            <div class="text11">Battery</div>
          </div>
        </div>
        <div class="p311-1">
          <label class="p3b-t-1">Actually, battery is made by</label>
          <label class="p3b-t-2">Chemical Solution</label>
        </div>
      </div>
      <button class="button3" onclick="myFunction3()"><div class="text12">Next</div></button>
    </div>
    <div id="page4">
      <div class="youtubeposition"><div id="player"></div></div>
      <div>
        <button class="button4" id="button4" onclick="myFunction4()">Next</button>
      </div>
    </div>
    <div id="page5">
      <div class="text4a">What is moving in the Li-ion battery & wire?</div>
      <div class="text5">When the phone is using</div>
      <div class="p5-1">
        <div class="p51-1">
          <div class="diagram">
            <div id="dragdrop">
              <div id="div1" class="dropzone" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
              <div id="div2" class="dropzone" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
            </div>
          </div>
          <button class="button-clean" id="button6" onclick="myFunction6()">Clean Slot</button><br>
        </div>
        <div class="p51-2">
          <p>Please drag the items into the two blank slots in the left:</p>
          <div>
            <div class="img7"><img src="assets/curr.png" draggable="true" ondragstart="drag(event)" id="drag1"></div>
            <div class="img8"><img src="assets/elec.png" draggable = "true" ondragstart="drag(event)" id="drag2"></div>
            <div class="img9"><img src="assets/lith.png" draggable = "true" ondragstart="drag(event)" id="drag3"></div>
            <div class="img10"><img src="assets/water.png" draggable = "true" ondragstart="drag(event)" id="drag4"></div>
          </div>
        </div>
      </div>
      <div id="buttonreset">
        <button class="button2" id="button5" onclick="myFunction5()"><div class="text6" id="text12">Done</div></button>
      </div>
    </div>
    <div id="page6">
      <div class="text4">Correct</div>
      <div class="text5">Please drag the items into the two blank slots in the left:</div>
      <div class="diagram-answer"><img src="assets/Correct.png"></div>
      <button class="button3" onclick="myFunction7()"><div class="text12">Next</div></button>
    </div>
    <div id="page61">
      <div class="text4">Not quite right</div>
      <div class="diagram-answer"><img src="assets/Liright.png"></div>
      <button class="button3" onclick="myFunction7()"><div class="text12">Next</div></button>
    </div>
    <div id="page62">
      <div class="text4">Not quite right</div>
      <div class="diagram-answer"><img src="assets/Eright.png"></div>
      <button class="button3" onclick="myFunction7()"><div class="text12">Next</div></button>
    </div>
    <div id="page63">
      <div class="text4">Incorrect</div>
      <div class="diagram-answer"><img src="assets/wrong.png"></div>
      <button class="button3" onclick="myFunction7()"><div class="text12">Next</div></button>
    </div>
    <div id="page7">
      <div class="text4 p7-title">What’s the ideal condition for keeping the battery?</div>
      <div class="p7-con1"> 
        <div class="p7-1">
          <div class="p71-1">
            <p>1. Which temperature is suitable for battery?</p>
          </div>
          <img id="p7-background">
          <div class="p71-2">
            <div class="p712-i" id="cool" onclick="p7_choose(event)">
              <img src="assets/icool.png">
            </div>
            <div class="p712-i" id="hot" onclick="p7_choose(event)">
              <img src="assets/fire.png">
            </div>
            <div class="p712-i" id="cold" onclick="p7_choose(event)">
              <img src="assets/snow.png">
            </div>
          </div>
          <img id="face" src="assets/noface.png"><br>
        </div>
        <div class="p7-2">
          <p>2. After how much discharge should you plug your charger again?</p>
          <div class="slidecontainer">
            <input type="range" min="0" max="100" value="0" class="slider" id="myRange">
            <span id="showvalue"></span><span>%</span>
          </div>
        </div>
        <div class="p7-3">
          <p>3. From exploring the temperature and battery level, write down the ideal conditions for charging a battery if you want to use it for long time?</p>
          <textarea id="hypothesis" name="textarea">Write something here</textarea>
        </div>
      </div>
      <button class="button2" id="button7" onclick="myFunction8()">Submit</button>
    </div>
    <div id="page8">
      <div class="text4">Let’s see the video to know whether you were correct or not.</div>
      <button class="button3" onclick="myFunction9()"><div class="text12">Next</div></button>
    </div>
    <div id="page9">
      <div class="text4">Congratulations!</div>
    </div>
    <script>
      var flag = 1, html1, html2, counter=0;
      var slider = document.getElementById("myRange");
      var texta = document.getElementById("hypothesis");
      var output = document.getElementById("showvalue");
      output.innerHTML = slider.value;
      texta.oninput = function()
      {
        console.log("dddd");
        document.getElementById('button7').style.backgroundColor = "#FFC107";
        document.getElementById('button7').style.color = "#FFFFFF";
        document.getElementById("button7").disabled = false;
      }

      //slider
      slider.oninput = function()
      {
        output.innerHTML = this.value;
        if (this.value < 40 || this.value > 99 )
        {
          document.getElementById("face").src = "assets/sad.png";
        }
        else {
          var temperature_is_bad = document.getElementById("p7-background").style.backgroundImage == 'url("assets/hot.png")' || 
          document.getElementById("p7-background").style.backgroundImage == 'url("assets/cold.png")'
          console.log(temperature_is_bad);
          if(!temperature_is_bad){
            document.getElementById("face").src = "assets/happy.png";}
        }
      }

      //page action
      function myFunction1() {
        document.getElementById("page1").style.display = "none";
        document.getElementById("page2").style.display = "flex";
        document.getElementById("button2").disabled = true;
      }
      function myFunction2() {
        document.getElementById("page2").style.display = "none";
        var radios = document.getElementsByName('material');
        if (radios[2].checked) {
          document.getElementById("page3").style.display = "flex";
        }
        else {
          //we can later make it personalized for each response
          document.getElementById("page31").style.display = "flex";
        }
      }
      function myFunction3() {
        document.getElementById("page3").style.display = "none";
        document.getElementById("page31").style.display = "none";
        document.getElementById("page4").style.display = "flex";
        flag=0;
      }
      function myFunction4() {
        document.getElementById("page4").style.display = "none";
        if(counter==0)
        {
          document.getElementById("page5").style.display = "flex";
          document.getElementById("button5").disabled = true;
          document.getElementById("button4").style.display = "none";
          html1 = document.getElementById('dragdrop').innerHTML;
          html2 = document.getElementById('buttonreset').innerHTML;
        }
        else if(counter==1)
        {
          document.getElementById("page7").style.display = "flex";
          document.getElementById("button7").disabled = true;
          document.getElementById("button4").style.display = "none";
        }
        else {
          document.getElementById("page9").style.display = "flex";
        }
        counter=counter+1;
      }
      function myFunction5() {
        document.getElementById("page5").style.display = "none";
        if (document.getElementById("div1").childNodes[0].getAttribute("src")=="assets/elec.png" && document.getElementById("div2").childNodes[0].getAttribute("src")=="assets/lith.png")
        {
          document.getElementById("page6").style.display = "flex";
        }
        else if (document.getElementById("div2").childNodes[0].getAttribute("src")=="assets/lith.png")
        {
          document.getElementById("page61").style.display = "flex";
        }
        else if (document.getElementById("div1").childNodes[0].getAttribute("src")=="assets/elec.png")
        {
          document.getElementById("page62").style.display = "flex";
        }
        else {
          document.getElementById("page63").style.display = "flex";
        }
      }
      function myFunction6() {
        var container1 = document.getElementById("dragdrop");
        container1.innerHTML= html1;
        var container2 = document.getElementById("buttonreset");
        container2.innerHTML= html2;
      }
      function myFunction7() {
        document.getElementById("page6").style.display = "none";
        document.getElementById("page61").style.display = "none";
        document.getElementById("page62").style.display = "none";
        document.getElementById("page63").style.display = "none";
        document.getElementById("page4").style.display = "flex";
        flag=0;
      }
      function myFunction8() {
        document.getElementById("page7").style.display = "none";
        document.getElementById("page8").style.display = "flex";
      }
      function myFunction9() {
        document.getElementById("page8").style.display = "none";
        document.getElementById("page4").style.display = "flex";
        flag=0;
      }

      function p7_choose(event) {
        //clean
        document.getElementById("cool").style.border = "none";
        document.getElementById("hot").style.border = "none";
        document.getElementById("cold").style.border = "none";

        //change border
        let _target = event.target.id;
        console.log(_target);
        document.getElementById(_target.toString()).style.border = "6px solid #66ECCC"

        
        //change background
        if (_target == "cool")
        {
          document.getElementById("p7-background").style.backgroundImage = "url('assets/cool.png')";
          document.getElementById("face").src = "assets/happy.png";
        }else
        if (_target == "cold")
        {
          document.getElementById("p7-background").style.backgroundImage = "url('assets/cold.png')";
          document.getElementById("face").src = "assets/sad.png";
        }else
        if(_target == "hot")
        {
          document.getElementById("p7-background").style.backgroundImage = "url('assets/hot.png')";
          document.getElementById("face").src = "assets/sad.png";
        }
      }

      function radio1() {
        document.getElementById("img5").style.display = "flex";
        document.getElementById("img5").src = "assets/Current.png";
        document.getElementById('button2').style.backgroundColor = "#FFC107";
        document.getElementById('button2').style.color = "#FFFFFF";
        document.getElementById("button2").disabled = false;
      }
      function radio2() {
        document.getElementById("img5").style.display = "flex";
        document.getElementById("img5").src = "assets/Metal.png";
        document.getElementById('button2').style.backgroundColor = "#FFC107";
        document.getElementById('button2').style.color = "#FFFFFF";
        document.getElementById("button2").disabled = false;
      }
      function radio3() {
        document.getElementById("img5").style.display = "flex";
        document.getElementById("img5").src = "assets/Chemical Solution.png";
        document.getElementById('button2').style.backgroundColor = "#FFC107";
        document.getElementById('button2').style.color = "#FFFFFF";
        document.getElementById("button2").disabled = false;
      }
      function radio4() {
        document.getElementById("img5").style.display = "flex";
        document.getElementById("img5").src = "assets/Cotton.png";
        document.getElementById('button2').style.backgroundColor = "#FFC107";
        document.getElementById('button2').style.color = "#FFFFFF";
        document.getElementById("button2").disabled = false;
      }

      function allowDrop(ev) {
        ev.preventDefault();
      }

      function drag(ev) {
        ev.dataTransfer.setData("text", ev.target.id);
      }

      function drop(ev) {
        console.log(ev.target.childNodes);
        console.log(ev.target.childNodes.length);
        ev.preventDefault();
        var data = ev.dataTransfer.getData("text");
        var el = ev.target;
        if (ev.target.childNodes.length>=1) {
          ev.target.childNodes[0].remove();
          el.appendChild(document.getElementById(data).cloneNode(true));
          console.log("remove");
          //ev.target.removeChild(ev.target.childNodes[0]);
        }
        else {
          el.appendChild(document.getElementById(data).cloneNode(true));
        }
        //ev.target.appendChild(document.getElementById(data));
        if (document.getElementById('div1').innerHTML != "" && document.getElementById('div2').innerHTML != "") {
          document.getElementById("button5").disabled = false;
          document.getElementById('button5').style.backgroundColor = "#FFC107";
          document.getElementById('text12').style.color = "#FFFFFF";
        }

      }

      // 1. Youtube video starts here
      // 2. This code loads the IFrame Player API code asynchronously.
      var videoIDs = [
        'lil-Xqhugx8',
        'uFLvcRcBy30',
        'quHqanLz7IQ'
    ];
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3. This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      var player, currentVideoId = 0;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
      }

      // 4. The API will call this function when the video player is ready.
      function onPlayerReady(event) {
        //event.target.loadVideoById(videoIDs[currentVideoId]);
      }

      // 5. The API calls this function when the player's state changes.
      //    The function indicates that when playing a video (state=1),
      //    the player should play for six seconds and then stop.
      //var done = false;
      function onPlayerStateChange(event) {
        //if (event.data == YT.PlayerState.PLAYING && !done) {
          //setTimeout(pauseVideo, 6000);
          //done = true;
        //}
        if(event.data === 0) {
          if (currentVideoId==1) {
            document.getElementById("button4").style.display = "block";
          }
          if (currentVideoId==2) {
            document.getElementById("button4").style.display = "block";
          }
          if (currentVideoId==3) {
            document.getElementById("button4").style.display = "block";
          }
          if (event.data == YT.PlayerState.ENDED ) {
            // currentVideoId++;
            // if (currentVideoId < videoIDs.length) {
            //     player.loadVideoById(videoIDs[currentVideoId]);
            // }
          }
        }
      }
      setInterval(function() {
          if(flag==0) {
              // Button is hidden
              if (currentVideoId < videoIDs.length) {
                player.loadVideoById(videoIDs[currentVideoId]);
              }
              currentVideoId++;
              flag=1;
          }
      }, 100);
    </script>
 </body>
</html>
